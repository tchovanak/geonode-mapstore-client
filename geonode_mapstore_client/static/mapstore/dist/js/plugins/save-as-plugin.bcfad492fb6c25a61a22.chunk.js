"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[41103],{921914:(e,t,n)=>{n.d(t,{B1:()=>S,DW:()=>D,DZ:()=>c,E0:()=>d,F9:()=>f,Fm:()=>G,GI:()=>C,HP:()=>z,Ih:()=>u,JB:()=>k,LU:()=>U,MO:()=>te,Mc:()=>re,Mn:()=>M,PM:()=>$,Pg:()=>V,Pn:()=>l,Qu:()=>se,RA:()=>ae,Re:()=>E,TM:()=>B,TP:()=>ee,VB:()=>O,WU:()=>L,XL:()=>o,XP:()=>Y,X_:()=>p,Xp:()=>w,Xw:()=>i,Y$:()=>ce,ZF:()=>N,ZM:()=>ie,Zb:()=>R,Zw:()=>oe,aN:()=>K,am:()=>ue,cb:()=>T,e8:()=>s,fv:()=>F,g:()=>q,gG:()=>P,gc:()=>j,ih:()=>g,jL:()=>b,kT:()=>de,km:()=>a,lF:()=>h,lK:()=>Q,mK:()=>x,oO:()=>ne,oz:()=>I,pb:()=>v,ph:()=>_,qb:()=>y,sV:()=>Z,sv:()=>J,u0:()=>W,wm:()=>le,ws:()=>H,xy:()=>m,zX:()=>A});var r=n(647310),o="LOAD_FEATURE_INFO",a="ERROR_FEATURE_INFO",u="EXCEPTIONS_FEATURE_INFO",i="CHANGE_MAPINFO_STATE",l="NEW_MAPINFO_REQUEST",c="PURGE_MAPINFO_RESULTS",s="CHANGE_MAPINFO_FORMAT",d="SHOW_MAPINFO_MARKER",f="HIDE_MAPINFO_MARKER",p="SHOW_REVERSE_GEOCODE",v="HIDE_REVERSE_GEOCODE",y="GET_VECTOR_INFO",E="NO_QUERYABLE_LAYERS",g="CLEAR_WARNING",m="FEATURE_INFO_CLICK",b="IDENTIFY:UPDATE_FEATURE_INFO_CLICK_POINT",O="IDENTIFY:CLICK_POINT",I="IDENTIFY:TOGGLE_HIGHLIGHT_FEATURE",_="TOGGLE_MAPINFO_STATE",h="UPDATE_CENTER_TO_MARKER",P="IDENTIFY:CHANGE_PAGE",T="IDENTIFY:CLOSE_IDENTIFY",C="IDENTIFY:CHANGE_FORMAT",S="IDENTIFY:TOGGLE_SHOW_COORD_EDITOR",F="IDENTIFY:EDIT_LAYER_FEATURES",j="IDENTIFY:CURRENT_EDIT_FEATURE_QUERY",A="IDENTIFY:SET_MAP_TRIGGER",N="IDENTIFY:TOGGLE_EMPTY_MESSAGE_GFI",R="IDENTIFY:SET_SHOW_IN_MAP_POPUP",D="IDENTIFY:IDENTIFY_IS_MOUNTED",w="IDENTIFY:INIT_PLUGIN";function G(e,t,n,r,a){return{type:o,data:t,reqId:e,requestParams:n,layerMetadata:r,layer:a}}function Z(e,t,n,r){return{type:a,error:t,reqId:e,requestParams:n,layerMetadata:r}}function M(e,t,n,r){return{type:u,reqId:e,exceptions:t,requestParams:n,layerMetadata:r}}function U(){return{type:E}}function Y(){return{type:g}}function L(e,t){return{type:l,reqId:e,request:t}}function k(e,t,n,r){return{type:y,layer:e,request:t,metadata:n,queryableLayers:r}}function x(e){return{type:i,enabled:e}}function q(){return{type:c}}function H(e){return{type:s,infoFormat:e}}function z(){return{type:d}}function K(){return{type:f}}function X(e){return{type:p,reverseGeocodeData:e.data}}function V(e){return function(t){r.Z.reverseGeocode(e).then((function(e){t(X(e))})).catch((function(e){t(X(e))}))}}function W(){return{type:v}}function B(){return{type:_}}function $(e){return{type:h,status:e}}function Q(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return{type:m,point:e,layer:t,filterNameList:n,overrideParams:r,itemId:o}}function J(e){return{type:b,point:e}}function ee(e){return{type:O,point:e}}function te(e){return{type:I,enabled:e}}function ne(e){return{type:P,index:e}}var re=function(){return{type:T}},oe=function(e){return{type:C,format:e}},ae=function(e){return{type:S,showCoordinateEditor:e}},ue=function(e){return{type:F,layer:e}},ie=function(e){return{type:j,query:e}},le=function(e){return{type:A,trigger:e}},ce=function(e){return{type:R,value:e}},se=function(e){return{type:D,isMounted:e}},de=function(e){return{type:w,cfg:e}}},647310:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(375875),o=n.n(r),a=n(472500),u=n.n(a),i=n(727418),l=n.n(i),c={format:"json",bounded:0,polygon_geojson:1,priority:5};const s={geocode:function(e,t){var n=l()({q:e},c,t||{}),r=u().format({protocol:"https",host:"nominatim.openstreetmap.org",query:n});return o().get(r)},reverseGeocode:function(e,t){var n=l()({lat:e.lat,lon:e.lng},t||{},c),r=u().format({protocol:"https",host:"nominatim.openstreetmap.org/reverse",query:n});return o().get(r)}}},399534:(e,t,n)=>{n.d(t,{Z:()=>a});var r=n(461365),o=n(569334);const a=(0,r.Z)(o.h_)},993451:(e,t,n)=>{n.d(t,{Z:()=>_});var r=n(86638),o=n(675263),a=n.n(o),u=n(984596),i=n.n(u),l=n(701469),c=n.n(l),s=n(414293),d=n.n(s),f=n(747037),p=n.n(f),v=n(867076),y=["messages"];function E(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"label";if(c()(t))return t.map((function(o){var a=(0,r.S$)(e,o[n]||p()(o)&&o||"");return m(m({},o),{},b({},n,d()(a)?t:a))}));var o=(0,r.S$)(e,t);return d()(o)?t:o},I=function(e,t,n){return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;return m(m({},r),{},b({},o,e[o]&&O(t,e[o],n)))}};const _=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"label";return(0,v.compose)((0,v.getContext)({messages:a().object}),(0,v.mapProps)((function(n){var r=n.messages,o=E(n,y);return m(m({},o),i()(e).reduce(I(o,r,t),{}))})))}},489514:(e,t,n)=>{n.d(t,{B9:()=>p,dl:()=>v,jg:()=>y});var r=n(375875),o=n.n(r),a=n(809228),u=n(169141),i=n(455877),l=n.n(i),c=new a.Z,s=new u.Z;function d(e){try{var t=e.features.reduce((function(e,t){var n;return"Polygon"===(null==t||null===(n=t.geometry)||void 0===n?void 0:n.type)&&e.geometry.coordinates.push(t.geometry.coordinates),e}),{type:"Feature",properties:{},geometry:{type:"MultiPolygon",coordinates:[]}}),n=s.readFeatures(t);return c.writeFeatures(n)}catch(e){return{}}}function f(e){try{var t,n,r=c.readFeatures(e),o=JSON.parse(s.writeFeatures(r)),a=null==o||null===(t=o.features)||void 0===t?void 0:t[0];return{type:"FeatureCollection",features:((null==a||null===(n=a.geometry)||void 0===n?void 0:n.coordinates)||[]).map((function(e){var t=l()();return{type:"Feature",properties:{id:t},id:t,geometry:{type:"Polygon",coordinates:e}}}))}}catch(e){return{type:"FeatureCollection",features:[]}}}var p=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"user";return o().get("/security/geolimits/".concat(e,"?").concat(n,"_id=").concat(t)).then((function(e){return f(e.data)}))},v=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"user",r=arguments.length>3?arguments[3]:void 0,a=d(r);return o().post("/security/geolimits/".concat(e,"?").concat(n,"_id=").concat(t),a).then((function(e){return e.data}))},y=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"user";return o().delete("/security/geolimits/".concat(e,"?").concat(n,"_id=").concat(t)).then((function(e){return e.data}))}},716333:(e,t,n)=>{n.r(t),n.d(t,{default:()=>N});var r=n(124852),o=n.n(r),a=n(171703),u=n(22222),i=n(322843),l=n(782904),c=n(805346),s=n(757588),d=n(800827),f=n(274621),p=n(693473),v=n(73443),y=n(925108),E=n(572036),g=n(162170),m=n(18576),b=n(236368),O=n(903828),I=n(12530),_=n(643892),h=n(452992),P=["resources","onSave","onCopy","isNew","closeOnSave","labelId"];function T(){return T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},T.apply(this,arguments)}function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){F(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j=(0,a.connect)((0,u.P1)([function(e){var t,n;return null==e||null===(t=e.controls)||void 0===t||null===(n=t[I.zj.COPY_RESOURCE])||void 0===n?void 0:n.value},d._H,function(e){var t;return null==e||null===(t=e.gnresource)||void 0===t?void 0:t.loading},function(e){var t;return null==e||null===(t=e.gnsave)||void 0===t?void 0:t.saving},function(e){var t;return null==e||null===(t=e.gnsave)||void 0===t?void 0:t.error},function(e){var t;return null==e||null===(t=e.gnsave)||void 0===t?void 0:t.success},O.fg,O.V$,h.SJ],(function(e,t,n,r,o,a,u,i,l){return{enabled:!!e,contentId:u||(null==t?void 0:t.id),resource:null==e?void 0:e[0],loading:l||n,saving:r,error:o,success:a,isNew:i}})),{onClose:l.Xg.bind(null,I.zj.COPY_RESOURCE,"value",void 0),onSave:v.Vj,onCopy:_.EU.bind(null,I.zj.COPY_RESOURCE),onClear:v.rG})((function(e){e.resources;var t,n=e.onSave,r=e.onCopy,a=e.isNew,u=e.closeOnSave,i=e.labelId,l=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,P);return o().createElement(b.Z,T({},l,{hideDescription:!a,copy:!a,key:(null==l||null===(t=l.resource)||void 0===t?void 0:t.pk)||"new",labelId:i||"save",onSave:function(e,t,o){var i;a?n(e,t,o):r([S(S({},null==l?void 0:l.resource),{},{title:t.name||(null==l||null===(i=l.resource)||void 0===i?void 0:i.title)})]),u&&l.onClose()}}))})),A=(0,a.connect)((0,u.P1)(f.jl,O.ez,O.yK,O.YR,O.V$,(function(e,t,n,r,o){return{enabled:e&&t&&((null==n?void 0:n.is_copyable)||o),resource:n,disabled:!!r}})),{onClick:l.Xg.bind(null,I.zj.COPY_RESOURCE,"value")})((function(e){var t=e.enabled,n=e.onClick,r=e.variant,a=e.size,u=e.resource,i=e.disabled;return t?o().createElement(p.Z,{variant:r||"primary",size:a,disabled:i,onClick:function(){return n([u])}},o().createElement(c.Z,{msgId:"saveAs"})):null}));const N=(0,i.rx)("SaveAs",{component:j,containers:{BurgerMenu:{name:"saveAs",position:30,text:o().createElement(c.Z,{msgId:"saveAs"}),icon:o().createElement(s.Glyphicon,{glyph:"floppy-open"}),action:l.Xg.bind(null,"saveAs",null),selector:(0,u.P1)(f.jl,O.ez,(function(e,t){return{style:e&&t?{}:{display:"none"}}}))},ActionNavbar:{name:"SaveAs",Component:A}},epics:S({},m.ZP),reducers:{gnresource:E.Z,gnsave:g.Z,controls:y.Z}})},236368:(e,t,n)=>{n.d(t,{Z:()=>g});var r=n(124852),o=n.n(r),a=n(675263),u=n.n(a),i=n(694745),l=n(805346),c=n(757588),s=n(993451),d=n(532425),f=n(399534);function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],u=!0,i=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);u=!0);}catch(e){i=!0,o=e}finally{try{u||null==n.return||n.return()}finally{if(i)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var y=(0,s.Z)("placeholder")(c.FormControl);function E(e){var t=e.update,n=e.error,a=e.success,u=e.labelId,s=e.resource,v=e.contentId,E=e.saving,g=e.loading,m=e.enabled,b=e.onClose,O=e.onSave,I=e.onClear,_=e.hideDescription,h=e.copy,P=p((0,r.useState)(),2),T=P[0],C=P[1],S=p((0,r.useState)(""),2),F=S[0],j=S[1],A=p((0,r.useState)(""),2),N=A[0],R=A[1],D=p((0,r.useState)(!1),2),w=D[0],G=D[1],Z=(0,r.useRef)();Z.current={contentId:v,resource:s};var M=(0,r.useRef)(null);(0,r.useEffect)((function(){I()}),[m]),(0,r.useEffect)((function(){if(!g){var e=Z.current.resource||{};C(e.thumbnail_url),j(e.title),R(e.abstract),G(e.title?void 0:"error")}}),[m,g]);var U=g||E;return o().createElement(f.Z,null,o().createElement("div",{ref:M,onKeyUp:function(e){return e.stopPropagation(),(13===e.keyCode||"Enter"===e.code)&&(r=(n=h?{title:F,isUpdate:t,content:v,image:T,text:N,reload:!1}:{title:F,isUpdate:t,content:v,image:T,text:N,reload:!0}).title,o=n.isUpdate,a=n.content,u=n.image,i=n.text,l=n.reload,O(o?a:void 0,{thumbnail:u,name:r,description:i},l));var n,r,o,a,u,i,l}},o().createElement(i.Z,{title:o().createElement(l.Z,{msgId:u}),show:m,fitContent:!0,clickOutEnabled:!1,buttons:U?[]:[{text:o().createElement(l.Z,{msgId:"close"}),onClick:function(){return b()}},{text:o().createElement(l.Z,{msgId:u}),disabled:!!w,bsStyle:"primary",onClick:function(){return O(t?v:void 0,{thumbnail:T,name:F,description:N},!0)}}],onClose:U?null:function(){return b()}},n&&o().createElement(c.Alert,{bsStyle:"danger",style:{margin:0}},o().createElement("div",null,o().createElement(l.Z,{msgId:"map.mapError.errorDefault"}))),a&&o().createElement(c.Alert,{bsStyle:"success",style:{margin:0}},o().createElement("div",null,o().createElement(l.Z,{msgId:"saveDialog.saveSuccessMessage"}))),o().createElement(c.Form,{onSubmit:function(e){return e.preventDefault()}},o().createElement(c.FormGroup,{validationState:w},o().createElement(c.ControlLabel,null,o().createElement(l.Z,{msgId:"gnviewer.title"})),o().createElement(y,{autoFocus:!0,placeholder:"gnviewer.titlePlaceholder",value:F,onChange:function(e){j(e.target.value),G(e.target.value?void 0:"error")},onBlur:function(e){G(e.target.value?void 0:"error")}})),!_&&o().createElement(c.FormGroup,null,o().createElement(c.ControlLabel,null,o().createElement(l.Z,{msgId:"saveDialog.description"})),o().createElement(y,{placeholder:"saveDialog.descriptionPlaceholder",value:N,onChange:function(e){return R(e.target.value)}}))),U&&o().createElement("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(255, 255, 255, 0.8)",zIndex:2,display:"flex",alignItems:"center",justifyContent:"center"}},o().createElement(d.Z,{size:70})))))}E.propTypes={update:u().bool,labelId:u().string,contentId:u().oneOfType([u().string,u().number]),resource:u().object,loading:u().bool,enabled:u().bool,onClose:u().func,onSave:u().func,onInit:u().func,onClear:u().func,error:u().oneOfType([u().string,u().object]),success:u().oneOfType([u().string,u().object]),thumbnailOptions:u().object},E.defaultProps={update:!1,resource:{},loading:!1,enabled:!1,onClose:function(){},onSave:function(){},onInit:function(){},onClear:function(){},thumbnailOptions:{width:300,height:250,type:"image/jpeg",quality:.9,contain:!1}};const g=E},819081:(e,t,n)=>{e.exports=n(1174)}}]);