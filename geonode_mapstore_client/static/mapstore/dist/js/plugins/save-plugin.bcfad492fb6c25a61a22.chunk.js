"use strict";(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[14831],{921914:(e,t,n)=>{n.d(t,{B1:()=>F,DW:()=>C,DZ:()=>l,E0:()=>p,F9:()=>d,Fm:()=>G,GI:()=>h,HP:()=>z,Ih:()=>a,JB:()=>H,LU:()=>L,MO:()=>te,Mc:()=>re,Mn:()=>Y,PM:()=>Q,Pg:()=>V,Pn:()=>c,Qu:()=>se,RA:()=>ie,Re:()=>v,TM:()=>B,TP:()=>ee,VB:()=>I,WU:()=>U,XL:()=>o,XP:()=>Z,X_:()=>f,Xp:()=>S,Xw:()=>u,Y$:()=>le,ZF:()=>A,ZM:()=>ue,Zb:()=>D,Zw:()=>oe,aN:()=>X,am:()=>ae,cb:()=>N,e8:()=>s,fv:()=>R,g:()=>k,gG:()=>T,gc:()=>j,ih:()=>g,jL:()=>m,kT:()=>pe,km:()=>i,lF:()=>P,lK:()=>$,mK:()=>q,oO:()=>ne,oz:()=>_,pb:()=>y,ph:()=>b,qb:()=>E,sV:()=>M,sv:()=>J,u0:()=>W,wm:()=>ce,ws:()=>x,xy:()=>O,zX:()=>w});var r=n(647310),o="LOAD_FEATURE_INFO",i="ERROR_FEATURE_INFO",a="EXCEPTIONS_FEATURE_INFO",u="CHANGE_MAPINFO_STATE",c="NEW_MAPINFO_REQUEST",l="PURGE_MAPINFO_RESULTS",s="CHANGE_MAPINFO_FORMAT",p="SHOW_MAPINFO_MARKER",d="HIDE_MAPINFO_MARKER",f="SHOW_REVERSE_GEOCODE",y="HIDE_REVERSE_GEOCODE",E="GET_VECTOR_INFO",v="NO_QUERYABLE_LAYERS",g="CLEAR_WARNING",O="FEATURE_INFO_CLICK",m="IDENTIFY:UPDATE_FEATURE_INFO_CLICK_POINT",I="IDENTIFY:CLICK_POINT",_="IDENTIFY:TOGGLE_HIGHLIGHT_FEATURE",b="TOGGLE_MAPINFO_STATE",P="UPDATE_CENTER_TO_MARKER",T="IDENTIFY:CHANGE_PAGE",N="IDENTIFY:CLOSE_IDENTIFY",h="IDENTIFY:CHANGE_FORMAT",F="IDENTIFY:TOGGLE_SHOW_COORD_EDITOR",R="IDENTIFY:EDIT_LAYER_FEATURES",j="IDENTIFY:CURRENT_EDIT_FEATURE_QUERY",w="IDENTIFY:SET_MAP_TRIGGER",A="IDENTIFY:TOGGLE_EMPTY_MESSAGE_GFI",D="IDENTIFY:SET_SHOW_IN_MAP_POPUP",C="IDENTIFY:IDENTIFY_IS_MOUNTED",S="IDENTIFY:INIT_PLUGIN";function G(e,t,n,r,i){return{type:o,data:t,reqId:e,requestParams:n,layerMetadata:r,layer:i}}function M(e,t,n,r){return{type:i,error:t,reqId:e,requestParams:n,layerMetadata:r}}function Y(e,t,n,r){return{type:a,reqId:e,exceptions:t,requestParams:n,layerMetadata:r}}function L(){return{type:v}}function Z(){return{type:g}}function U(e,t){return{type:c,reqId:e,request:t}}function H(e,t,n,r){return{type:E,layer:e,request:t,metadata:n,queryableLayers:r}}function q(e){return{type:u,enabled:e}}function k(){return{type:l}}function x(e){return{type:s,infoFormat:e}}function z(){return{type:p}}function X(){return{type:d}}function K(e){return{type:f,reverseGeocodeData:e.data}}function V(e){return function(t){r.Z.reverseGeocode(e).then((function(e){t(K(e))})).catch((function(e){t(K(e))}))}}function W(){return{type:y}}function B(){return{type:b}}function Q(e){return{type:P,status:e}}function $(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return{type:O,point:e,layer:t,filterNameList:n,overrideParams:r,itemId:o}}function J(e){return{type:m,point:e}}function ee(e){return{type:I,point:e}}function te(e){return{type:_,enabled:e}}function ne(e){return{type:T,index:e}}var re=function(){return{type:N}},oe=function(e){return{type:h,format:e}},ie=function(e){return{type:F,showCoordinateEditor:e}},ae=function(e){return{type:R,layer:e}},ue=function(e){return{type:j,query:e}},ce=function(e){return{type:w,trigger:e}},le=function(e){return{type:D,value:e}},se=function(e){return{type:C,isMounted:e}},pe=function(e){return{type:S,cfg:e}}},647310:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(375875),o=n.n(r),i=n(472500),a=n.n(i),u=n(727418),c=n.n(u),l={format:"json",bounded:0,polygon_geojson:1,priority:5};const s={geocode:function(e,t){var n=c()({q:e},l,t||{}),r=a().format({protocol:"https",host:"nominatim.openstreetmap.org",query:n});return o().get(r)},reverseGeocode:function(e,t){var n=c()({lat:e.lat,lon:e.lng},t||{},l),r=a().format({protocol:"https",host:"nominatim.openstreetmap.org/reverse",query:n});return o().get(r)}}},532425:(e,t,n)=>{n.d(t,{Z:()=>d});var r=n(675263),o=n.n(r),i=n(124852),a=n.n(i);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=function(e){return e>100?"full":e>40?"medium":"small"},p=function(e){var t=e.size,n=e.style,r=void 0===n?{}:n,o=e.className,i=e.hidden;return a().createElement("div",{className:o,style:c({width:t,height:t,overflow:"hidden"},r)},!i&&a().createElement("div",{className:"mapstore-".concat(s(t),"-size-loader")}))};p.propTypes={size:o().number,className:o().string,style:o().object};const d=p},489514:(e,t,n)=>{n.d(t,{B9:()=>f,dl:()=>y,jg:()=>E});var r=n(375875),o=n.n(r),i=n(809228),a=n(169141),u=n(455877),c=n.n(u),l=new i.Z,s=new a.Z;function p(e){try{var t=e.features.reduce((function(e,t){var n;return"Polygon"===(null==t||null===(n=t.geometry)||void 0===n?void 0:n.type)&&e.geometry.coordinates.push(t.geometry.coordinates),e}),{type:"Feature",properties:{},geometry:{type:"MultiPolygon",coordinates:[]}}),n=s.readFeatures(t);return l.writeFeatures(n)}catch(e){return{}}}function d(e){try{var t,n,r=l.readFeatures(e),o=JSON.parse(s.writeFeatures(r)),i=null==o||null===(t=o.features)||void 0===t?void 0:t[0];return{type:"FeatureCollection",features:((null==i||null===(n=i.geometry)||void 0===n?void 0:n.coordinates)||[]).map((function(e){var t=c()();return{type:"Feature",properties:{id:t},id:t,geometry:{type:"Polygon",coordinates:e}}}))}}catch(e){return{type:"FeatureCollection",features:[]}}}var f=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"user";return o().get("/security/geolimits/".concat(e,"?").concat(n,"_id=").concat(t)).then((function(e){return d(e.data)}))},y=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"user",r=arguments.length>3?arguments[3]:void 0,i=p(r);return o().post("/security/geolimits/".concat(e,"?").concat(n,"_id=").concat(t),i).then((function(e){return e.data}))},E=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"user";return o().delete("/security/geolimits/".concat(e,"?").concat(n,"_id=").concat(t)).then((function(e){return e.data}))}},228261:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(124852),o=n.n(r),i=n(675263),a=n.n(i),u=["id","className","style","children"];function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c.apply(this,arguments)}function l(e){var t=e.id,n=e.className,r=e.style,i=e.children,a=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,u),l=n?" "+n:"";return o().createElement(o().Fragment,null,o().createElement("div",c({},a,{id:t,className:"gn-spinner".concat(l),style:r}),o().createElement("div",null)),i)}l.propTypes={id:a().string,className:a().string,style:a().object},l.defaultProps={};const s=l},51605:(e,t,n)=>{n.d(t,{Z:()=>r.Z});var r=n(228261)},93136:(e,t,n)=>{n.r(t),n.d(t,{default:()=>D});var r=n(124852),o=n.n(r),i=n(675263),a=n.n(i),u=n(171703),c=n(22222),l=n(322843),s=n(805346),p=n(757588),d=n(800827),f=n(532425),y=n(693473),E=n(51605),v=n(274621),g=n(925108),O=n(572036),m=n(162170),I=n(18576),_=n(73443),b=n(903828),P=n(452992),T=n(805803),N=n(782904),h=n(86638);function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j=(0,u.connect)((0,c.P1)([function(e){var t;return null==e||null===(t=e.gnsave)||void 0===t?void 0:t.saving}],(function(e){return{saving:e}})))((function(e){return e.saving?o().createElement("div",{style:{position:"absolute",width:"100%",height:"100%",backgroundColor:"rgba(255, 255, 255, 0.75)",top:"0px",zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",right:"0px"}},o().createElement(f.Z,{size:150})):null}));function w(e,t){var n=e.enabled,i=e.onClick,a=e.variant,u=e.size,c=e.loading,l=e.className,p=e.dirtyState,d=e.location,f=e.history,v=e.onStorePendingChanges,g=t.messages,O=(0,r.useRef)();return O.current=p,(0,r.useEffect)((function(){var e,t=null==f||null===(e=f.location)||void 0===e?void 0:e.pathname;function n(e){O.current&&((e||window.event).returnValue=null)}return window.addEventListener("beforeunload",n),function(){var e;window.removeEventListener("beforeunload",n),t!==(null==f||null===(e=f.location)||void 0===e?void 0:e.pathname)&&O.current&&(window.confirm((0,h.S$)(g,"gnviewer.prompPendingChanges"))?v(null):(v(O.current),f.replace(d)))}}),[]),n?o().createElement(y.Z,{variant:p?"warning":a||"primary",size:u,onClick:function(){return i()},disabled:c,className:l},o().createElement(s.Z,{msgId:"save"})," ",c&&o().createElement(E.Z,null)):null}w.contextTypes={messages:a().object};var A=(0,u.connect)((0,c.P1)(v.jl,b.V$,b.il,d._H,P.IX,b.YR,(function(e,t,n,r,o,i){return{enabled:e&&!t&&(n||(null==r?void 0:r.canEdit)),loading:o,dirtyState:i}})),{onClick:_.nY,onStorePendingChanges:N.Xg.bind(null,"pendingChanges","value")})((0,T.EN)(w));const D=(0,l.rx)("Save",{component:j,containers:{BurgerMenu:{name:"save",position:30,text:o().createElement(s.Z,{msgId:"save"}),icon:o().createElement(p.Glyphicon,{glyph:"floppy-open"}),action:_.nY,selector:(0,c.P1)(v.jl,b.V$,b.il,d._H,(function(e,t,n,r){return{style:e&&!t&&(n||null!=r&&r.canEdit)?{}:{display:"none"}}}))},ActionNavbar:{name:"Save",Component:A}},epics:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){R(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},I.ZP),reducers:{gnresource:O.Z,gnsave:m.Z,controls:g.Z}})}}]);